(this["webpackJsonpkiedy-kolos"]=this["webpackJsonpkiedy-kolos"]||[]).push([[0],{195:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},215:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(2),r=n(104),s=n(1),i=n.n(s),o=n(53),u=n.n(o),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2020-11-01",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATE":return t.payload;default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GROUP":return t.payload;default:return e}},j=n(16),b=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ADD_EVENT_POPUP":return t.payload;default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REFRESH":return!e;default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DELETE_EVENT_POPUP":return t.payload;default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHOSEN_EVENT":return t.payload;default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHOSEN_THEME":return t.payload;default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EDIT_EVENT_POPUP":return t.payload;default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALL_EVENTS":return t.payload;default:return e}},x=n(148),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DAY_EVENTS":return Object(x.a)(t.payload);default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EVENT_TYPES":return t.payload;default:return e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SUBJECTS":return t.payload;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_OPTIONS_POPUP":return t.payload;default:return e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GROUPS":return t.payload;default:return e}},S=(Object(j.d)({allEvents:m,dayEvents:y,eventTypes:g,subjects:_,chosenDate:l,chosenGroup:d,addEventPopup:b,deleteEventPopup:f,editEventPopup:O,forceEventsRefresh:p,chosenEvent:v,chosenTheme:h,optionsPopup:E,groups:N}),n(3)),w=n(29),k=n(145),C=n.n(k),P=n(146),T=n.n(P),D=Object(S.createSlice)({name:"monthOffset",initialState:{value:0},reducers:{incrementMonthOffset:function(e){e.value+=1},decrementMonthOffset:function(e){e.value-=1},setMonthOffset:function(e,t){e.value=t.payload}}}),I=D.actions,z=I.incrementMonthOffset,G=I.decrementMonthOffset,M=(I.setMonthOffset,D.reducer),A=n(11),Y=n.n(A),R=Object(S.createSlice)({name:"chosenDate",initialState:{value:Y()().format("YYYY-MM-DD")},reducers:{setChoosenDate:function(e,t){e.value=t.payload}}}),L=R.actions.setChoosenDate,U=R.reducer,F=Object(S.createSlice)({name:"dailyEvents",initialState:{value:[]},reducers:{setDailyEvents:function(e,t){e.value=t.payload}}}),H=F.actions.setDailyEvents,J=F.reducer,V=Object(S.createSlice)({name:"chosenGroupID",initialState:{value:0},reducers:{setChosenGroupID:function(e,t){e.value=t.payload}}}),B=V.actions.setChosenGroupID,K=V.reducer,W=Object(S.createSlice)({name:"allEvents",initialState:{value:[]},reducers:{setAllEvents:function(e,t){e.value=t.payload}}}),q=W.actions.setAllEvents,Z=W.reducer,Q=Object(S.createSlice)({name:"addEventPopup",initialState:{value:!1},reducers:{setAddEventPopup:function(e,t){e.value=t.payload}}}),X=Q.actions.setAddEventPopup,$=Q.reducer,ee=Object(S.createSlice)({name:"editEventPopup",initialState:{value:!1},reducers:{setEditEventPopup:function(e,t){e.value=t.payload}}}),te=ee.actions.setEditEventPopup,ne=ee.reducer,ae=Object(S.createSlice)({name:"settingsPopup",initialState:{value:!1},reducers:{setSettingsPopup:function(e,t){e.value=t.payload}}}),ce=ae.actions.setSettingsPopup,re=ae.reducer,se=Object(S.createSlice)({name:"removeEventPopup",initialState:{value:!1},reducers:{setRemoveEventPopup:function(e,t){e.value=t.payload}}}),ie=se.actions.setRemoveEventPopup,oe=se.reducer,ue=Object(S.createSlice)({name:"subjects",initialState:{value:[]},reducers:{setSubjects:function(e,t){e.value=t.payload}}}),le=ue.actions.setSubjects,de=ue.reducer,je=Object(S.createSlice)({name:"groups",initialState:{value:[]},reducers:{setGroups:function(e,t){e.value=t.payload}}}),be=je.actions.setGroups,pe=je.reducer,fe=Object(S.createSlice)({name:"types",initialState:{value:[]},reducers:{setTypes:function(e,t){e.value=t.payload}}}),ve=fe.actions.setTypes,he=fe.reducer,Oe=Object(S.createSlice)({name:"forceEventsRefresh",initialState:{value:!1},reducers:{forceEventsRefresh:function(e,t){e.value=!e.value}}}),me=Oe.actions.forceEventsRefresh,xe=Oe.reducer,ye=Object(S.createSlice)({name:"chosenEvent",initialState:{value:0},reducers:{setChosenEvent:function(e,t){e.value=t.payload}}}),ge=ye.actions.setChosenEvent,_e=ye.reducer,Ee={key:"root",storage:C.a,stateReconciler:T.a},Ne=Object(j.d)({monthOffset:M,chosenDate:U,chosenGroupID:K,dailyEvents:J,allEvents:Z,addEventPopup:$,removeEventPopup:oe,editEventPopup:ne,settingsPopup:re,subjects:de,groups:pe,types:he,forceEventsRefresh:xe,chosenEvent:_e}),Se=Object(w.persistReducer)(Ee,Ne),we=Object(S.configureStore)({reducer:Se,middleware:Object(S.getDefaultMiddleware)({serializableCheck:{ignoredActions:[w.FLUSH,w.REHYDRATE,w.PAUSE,w.PERSIST,w.PURGE,w.REGISTER]}})}),ke=Object(w.persistStore)(we),Ce=n(147),Pe=(n(195),n(196),function(e){return Object(a.jsx)("header",{className:"header",children:e.children})}),Te=(n(197),function(e){var t=e.handleClick,n=e.children,c=e.modifier,r=void 0===c?"":c;return Object(a.jsx)("button",{className:"button ".concat(r),onClick:t,children:n})}),De=(n(198),function(e){return Object(a.jsx)("h1",{className:"title",children:e.children})}),Ie=(n(199),function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.monthOffset.value}));return Object(a.jsxs)("div",{className:"monthPagination",children:[Object(a.jsx)(Te,{handleClick:function(){return e(G())},children:Object(a.jsx)("span",{className:"material-icons",children:"chevron_left"})}),Object(a.jsx)(De,{children:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"][parseInt(Y()().format("MM"))+t-1]}),Object(a.jsx)(Te,{handleClick:function(){return e(z())},children:Object(a.jsx)("span",{className:"material-icons",children:"chevron_right"})})]})}),ze=function(e){return e.isAdmin?Object(a.jsx)(Te,{children:Object(a.jsx)("span",{className:"material-icons",children:"person"})}):Object(a.jsx)(Te,{handleClick:function(){console.log("Showing Login Panel")},modifier:"button--transparent button--verified",children:Object(a.jsx)("span",{title:"Zalogowano jako Administrator",className:"material-icons",children:"check_circle_outline"})})},Ge=(n(200),function(){var e=Object(c.b)();return Object(a.jsxs)("div",{className:"toolbar",children:[Object(a.jsx)(Te,{handleClick:function(){e(ce(!0))},children:Object(a.jsx)("span",{title:"Ustawienia",className:"material-icons",children:"settings"})}),Object(a.jsx)(Te,{children:Object(a.jsx)("span",{title:"Powiadomienia",className:"material-icons",children:"notifications"})}),Object(a.jsx)(ze,{})]})}),Me=(n(201),function(){return Object(a.jsxs)("div",{className:"calendar__dayNames",children:[Object(a.jsx)("div",{children:"pon."}),Object(a.jsx)("div",{children:"wt."}),Object(a.jsx)("div",{children:"\u015br."}),Object(a.jsx)("div",{children:"czw."}),Object(a.jsx)("div",{children:"pt."}),Object(a.jsx)("div",{children:"sb."}),Object(a.jsx)("div",{children:"ndz."})]})}),Ae=n(4),Ye=(n(202),function(e){var t=e.handleResize,n=e.events,c=Object(s.useRef)(null);Object(s.useEffect)((function(){t(r())}),[t]),Object(s.useEffect)((function(){window.addEventListener("resize",(function(){t(r)}))}),[t]);var r=function(){for(var e=Array.from(c.current.children),t=1,n=1;n<e.length&&!(e[n].offsetTop<=e[0].offsetTop);n++)t++;return e.length-t};return Object(a.jsx)("div",{ref:c,className:"day__flags",children:n.length>0&&n.map((function(e){return Object(a.jsx)("div",{className:"day__flag day__flag--".concat(e.type),children:e.subjectShortName})}))})}),Re=(n(203),function(e){var t=e.day,n=e.otherCount;return Object(a.jsxs)("div",{className:"day__footer",children:[Object(a.jsxs)("div",{className:"day__moreFlag ".concat(n>0?"":"hidden"),children:[n,"+"]}),Object(a.jsx)("div",{className:"day__number",children:t})]})}),Le=(n(204),function(e){var t=e.date,n=e.active,r=Object(c.b)(),i=Object(s.useRef)(),o=Object(s.useState)(0),u=Object(Ae.a)(o,2),l=u[0],d=u[1],j=Object(s.useState)(!1),b=Object(Ae.a)(j,2),p=b[0],f=b[1],v=Object(c.c)((function(e){return e.chosenDate.value})),h=Object(c.c)((function(e){return e.allEvents.value}));Object(s.useEffect)((function(){f(v==t)}),[v]);return Object(a.jsxs)("div",{onClick:function(){r(L(t))},ref:i,className:"day ".concat(function(){if(!n)return"day--inactive"}()," ").concat(p?"day--selected":""),children:[Object(a.jsx)(Ye,{events:h.filter((function(e){return e.date==t})),handleResize:d}),Object(a.jsx)(Re,{otherCount:l,day:Y()(t).format("DD")})]})}),Ue=(n(205),function(){var e=[7,1,2,3,4,5,6],t=Object(c.c)((function(e){return e.monthOffset.value})),n=Object(s.useState)([]),r=Object(Ae.a)(n,2),i=r[0],o=r[1];Object(s.useEffect)((function(){u()}),[t]);var u=function(){for(var n=Y()().add(t,"month"),a=new Array(42),c=e[n.startOf("month").day()],r=n.startOf("month").subtract(c-1,"day"),s=0;s<42;s++)a[s]=r.add(s,"day").format("YYYY-MM-DD");o(a)},l=function(e){var n=Y()().add(t,"month");return Y()(e).format("MM")===n.format("MM")};return Object(a.jsx)("div",{className:"calendar__days",children:i.map((function(e){return Object(a.jsx)(Le,{date:e,active:l(e)},e)}))})}),Fe=(n(206),function(){return Object(a.jsxs)("div",{className:"calendar",children:[Object(a.jsx)(Me,{}),Object(a.jsx)(Ue,{})]})}),He=(n(207),function(e){var t=e.children,n=e.handleClick;return Object(a.jsxs)("div",{className:"itemAdder",onClick:n,children:[Object(a.jsx)("span",{className:"material-icons",children:"add"}),Object(a.jsx)("span",{className:"itemAdder__text",children:t})]})}),Je=(n(208),function(e){var t=e.items,n=e.name,r=e.renderComponent,s=Object(c.b)();return Object(a.jsxs)("div",{className:"itemList",children:[Object(a.jsxs)(He,{handleClick:function(){return s(X(!0))},children:["Dodaj ",n]}),Object(a.jsx)("div",{className:"itemList__content",children:t.length>0&&t.map((function(e){return r(e)}))})]})}),Ve=(n(209),function(e){var t=e.event,n=Object(c.b)();return Object(a.jsxs)("div",{className:"eventCard",children:[Object(a.jsxs)("div",{className:"eventCard__topbar eventCard__topbar--blue",children:[Object(a.jsx)("h3",{className:"eventCard__title",children:t.subjectLongName}),Object(a.jsxs)("div",{className:"eventCard__buttons",children:[Object(a.jsx)(Te,{modifier:"button--transparent button--edit button--small",handleClick:function(){return n(ge(t.id)),void n(te(!0))},children:Object(a.jsx)("span",{className:"material-icons",children:"edit"})}),Object(a.jsx)(Te,{modifier:"button--transparent button--delete button--small",handleClick:function(){return n(ge(t.id)),void n(ie(!0))},children:Object(a.jsx)("span",{className:"material-icons",children:"delete"})})]})]}),Object(a.jsxs)("div",{className:"eventCard__panel",children:[Object(a.jsxs)("div",{className:"eventCard__tags",children:[Object(a.jsxs)("div",{className:"eventCard__tag",children:[Object(a.jsx)("span",{className:"material-icons",children:"label"})," ",t.type]}),Object(a.jsxs)("div",{className:"eventCard__tag",children:[Object(a.jsx)("span",{className:"material-icons",children:"schedule"}),t.time]}),Object(a.jsxs)("div",{className:"eventCard__tag",children:[Object(a.jsx)("span",{className:"material-icons",children:"info"}),"Informacja"]})]}),Object(a.jsx)("div",{className:"eventCard__description",children:t.description})]})]})}),Be=(n(210),function(){var e=Object(c.c)((function(e){return e.dailyEvents.value}));return Object(a.jsx)("div",{className:"dailyEvents",children:Object(a.jsx)(Je,{name:"Wydarzenie",items:e,renderComponent:function(e){return Object(a.jsx)(Ve,{event:e},e.id)}})})}),Ke=(n(211),function(e){var t=e.course,n=e.university;return Object(a.jsxs)("div",{className:"courseInfo",children:[Object(a.jsx)("h3",{className:"courseInfo__subtitle",children:n}),Object(a.jsx)("h2",{className:"courseInfo__title",children:t})]})}),We=(n(212),function(e){var t=e.children;return Object(a.jsxs)("div",{className:"itemBar",children:[Object(a.jsx)("h3",{className:"itemBar__title",children:t}),Object(a.jsxs)("div",{className:"itemBar__buttons",children:[Object(a.jsx)(Te,{modifier:"button--transparent button--edit",handleClick:console.log("edit pressed"),children:Object(a.jsx)("span",{className:"material-icons",children:"edit"})}),Object(a.jsx)(Te,{modifier:"button--transparent button--delete",handleClick:console.log("remove pressed"),children:Object(a.jsx)("span",{className:"material-icons",children:"delete"})})]})]})}),qe=(n(213),function(){var e=function(e){var t=e.name;return Object(a.jsx)(We,{children:t},t)};return Object(a.jsxs)("div",{className:"adminPanel",children:[Object(a.jsx)("div",{className:"scrollable",children:Object(a.jsx)(Je,{renderComponent:e,items:[{name:"Wytwarzanie Aplikacji Internetowych",abbreviation:"WAI"},{name:"J\u0119zyki Programowania",abbreviation:"JPR"}],name:"Przedmiot"})}),Object(a.jsx)("div",{className:"scrollable",children:Object(a.jsx)(Je,{renderComponent:e,items:[{name:"Grupa 1"},{name:"Grupa 2"},{name:"Grupa 3"},{name:"Grupa 4"},{name:"Grupa 5"},{name:"Grupa 6"},{name:"Grupa 7"},{name:"Grupa 8"},{name:"Grupa 9"},{name:"Grupa 10"},{name:"Grupa 11"}],name:"Grup\u0119"})}),Object(a.jsx)(Ke,{course:"Informatyka",university:"Politechnika Gda\u0144ska"})]})}),Ze=n(37),Qe=n(6),Xe=n.n(Qe),$e=n(14),et=n(5),tt=(n(215),function(e){var t=e.children;return u.a.createPortal(Object(a.jsx)("div",{className:"modal__background",children:Object(a.jsx)("div",{className:"modal__body",children:t})}),document.querySelector("#modal"))}),nt=function(){var e,t=Object(c.b)(),n=Object(c.c)((function(e){return e.subjects.value})),r=Object(c.c)((function(e){return e.groups.value})),i=Object(c.c)((function(e){return e.types.value})),o=Object(c.c)((function(e){return e.chosenDate.value})),u=Object(et.f)().id,l=Object(s.useState)(0),d=Object(Ae.a)(l,2),j=d[0],b=d[1],p=Object(s.useState)(0),f=Object(Ae.a)(p,2),v=f[0],h=f[1],O=Object(s.useState)([]),m=Object(Ae.a)(O,2),x=m[0],y=m[1],g=Object(s.useState)(0),_=Object(Ae.a)(g,2),E=_[0],N=_[1],S=Object(s.useState)("12:00"),w=Object(Ae.a)(S,2),k=w[0],C=w[1],P=Object(s.useState)(""),T=Object(Ae.a)(P,2),D=T[0],I=T[1],z=Object(s.useState)(""),G=Object(Ae.a)(z,2),M=G[0],A=G[1];Object(s.useEffect)((function(){N(i[0].id),b(n[0].id),h(r[0].id),y([r[0].id])}),[]);var Y=function(){var e=Object($e.a)(Xe.a.mark((function e(){var n;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json","Api-Key":M},body:JSON.stringify({subjectID:j,yearCourseId:u,name:"temporary name",groupIds:x,date:o+"T"+k,description:D,eventTypeId:E,password:M}),mode:"cors"},e.next=3,fetch("https://kiedy-kolos-backend.azurewebsites.net/yearCourses/".concat(u,"/Events"),n);case 3:e.sent.ok&&(t(X(!1)),t(me()));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(tt,{children:[Object(a.jsx)("h2",{children:"Dodawanie wydarzenia"}),Object(a.jsx)("label",{htmlFor:"subject",children:"Przedmiot"}),Object(a.jsx)("select",{className:"event-adder__input",id:"subject",value:j,onChange:function(e){b(e.target.value)},children:n.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{className:"event-adder__label",htmlFor:"group",children:"Grupa"}),Object(a.jsx)("select",{className:"event-adder__input",id:"group",value:v,onChange:function(e){h(e.target.value),y([e.target.value])},children:r.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.groupNumber},e.id)}))}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{className:"event-adder__label",htmlFor:"type",children:"Typ"}),Object(a.jsx)("select",{className:"event-adder__input",id:"type",value:E,onChange:function(e){N(e.target.value)},children:i.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{className:"edition__label",htmlFor:"time",children:"Godzina"}),Object(a.jsx)("input",(e={type:"time",id:"time",name:"time",min:"07:00",value:"16:00:00",max:"21:00"},Object(Ze.a)(e,"value",k),Object(Ze.a)(e,"onChange",(function(e){C(e.target.value)})),e)),Object(a.jsx)("br",{}),Object(a.jsx)("label",{className:"edition__label",htmlFor:"description",children:"Opis"}),Object(a.jsx)("textarea",{id:"description",name:"description",rows:"5",cols:"30",placeholder:"Tu wpisz opis...",value:D,onChange:function(e){I(e.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Has\u0142o",onChange:function(e){A(e.target.value)}}),Object(a.jsx)("button",{className:"event-adder__button--reject",onClick:function(e){e.preventDefault(),t(X(!1))},children:"Anuluj"}),Object(a.jsx)("button",{className:"event-adder__button--accept",onClick:function(e){e.preventDefault(),Y()},children:"Utw\xf3rz wydarzenie"})]})},at=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.chosenEvent.value})),n=Object(et.f)().id,r=Object(s.useState)(""),i=Object(Ae.a)(r,2),o=i[0],u=i[1],l=function(){var a=Object($e.a)(Xe.a.mark((function a(){var c;return Xe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={method:"DELETE",headers:{"Content-Type":"application/json","Api-Key":o},mode:"cors"},a.next=3,fetch("https://kiedy-kolos-backend.azurewebsites.net/yearCourses/".concat(n,"/Events/").concat(t),c);case 3:a.sent.ok&&(e(ie(!1)),e(me()));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(a.jsxs)(tt,{children:[Object(a.jsx)("h2",{children:"Usuwanie wydarzenia"}),Object(a.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Has\u0142o",onChange:function(e){u(e.target.value)}}),Object(a.jsx)("button",{className:"event-adder__button--reject",onClick:function(){e(ie(!1))},children:"Anuluj"}),Object(a.jsx)("button",{className:"event-adder__button--accept",onClick:l,children:"Usu\u0144"})]})},ct=(n(217),n(68)),rt=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.forceEventsRefresh.value})),n=Object(c.c)((function(e){return e.chosenDate.value})),a=Object(c.c)((function(e){return e.chosenGroupID.value})),r=Object(s.useState)(!1),i=Object(Ae.a)(r,2),o=i[0],u=i[1],l=Object(s.useState)([]),d=Object(Ae.a)(l,2),j=d[0],b=d[1],p=Object(s.useState)([]),f=Object(Ae.a)(p,2),v=f[0],h=f[1],O=Object(s.useState)([]),m=Object(Ae.a)(O,2),x=m[0],y=m[1],g=Object(s.useState)([]),_=Object(Ae.a)(g,2),E=(_[0],_[1],Object(et.f)().id);Object(s.useEffect)((function(){console.log("Downloading data..."),P()}),[t,a]),Object(s.useEffect)((function(){D(),I(n)}),[o]),Object(s.useEffect)((function(){I(n)}),[n]);var N=function(){var e=Object($e.a)(Xe.a.mark((function e(t){var n,a,c;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://kiedy-kolos-backend.azurewebsites.net/"+t,e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",c.result);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object($e.a)(Xe.a.mark((function e(){var t;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("yearCourses/".concat(E,"/groups/").concat(a,"/events"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var t=Object($e.a)(Xe.a.mark((function t(){var n;return Xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N("yearCourses/".concat(E,"/subjects"));case 2:return n=t.sent,e(le(n)),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=Object($e.a)(Xe.a.mark((function t(){var n;return Xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N("eventTypes");case 2:return n=t.sent,e(ve(n)),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object($e.a)(Xe.a.mark((function t(){var n;return Xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N("yearCourses/".concat(E,"/groups"));case 2:return n=t.sent,e(be(n)),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(){var e=Object($e.a)(Xe.a.mark((function e(){return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=b,e.next=3,S();case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=y,e.next=8,w();case 8:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=h,e.next=13,k();case 13:return e.t5=e.sent,(0,e.t4)(e.t5),e.t6=T,e.next=18,C();case 18:e.t7=e.sent,(0,e.t6)(e.t7);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(t){var n,c=Object(ct.a)(t);try{for(c.s();!(n=c.n()).done;){var r=n.value;if(a==r.id)return void u(!o)}}catch(s){c.e(s)}finally{c.f()}e(B(t[0].id)),console.log("Unknown group ID. Changing to default...")},D=function(){var t=Object($e.a)(Xe.a.mark((function t(){var n,a,c,r,s;return Xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=j.length){t.next=2;break}return t.abrupt("return");case 2:n=[],a=Object(ct.a)(j);try{for(a.s();!(c=a.n()).done;)r=c.value,s={date:Y()(r.date).format("YYYY-MM-DD"),subjectLongName:z(x,r.subjectId,"name"),subjectShortName:z(x,r.subjectId,"shortName"),type:z(v,r.eventTypeId,"name")},n.push(s)}catch(i){a.e(i)}finally{a.f()}e(q(n));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=Object($e.a)(Xe.a.mark((function t(n){var a,c,r,s,i;return Xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],c=Object(ct.a)(j),t.prev=2,c.s();case 4:if((r=c.n()).done){t.next=12;break}if(s=r.value,Y()(s.date).format("YYYY-MM-DD")==n){t.next=8;break}return t.abrupt("continue",10);case 8:i={id:s.id,date:Y()(s.date).format("YYYY-MM-DD"),description:s.description,subjectLongName:z(x,s.subjectId,"name"),type:z(v,s.eventTypeId,"name"),time:Y()(s.date).format("HH:mm")},a.push(i);case 10:t.next=4;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),c.e(t.t0);case 17:return t.prev=17,c.f(),t.finish(17);case 20:e(H(a));case 21:case"end":return t.stop()}}),t,null,[[2,14,17,20]])})));return function(e){return t.apply(this,arguments)}}(),z=function(e,t,n){var a,c=Object(ct.a)(e);try{for(c.s();!(a=c.n()).done;){var r=a.value;if(r.id==t)return r[n]}}catch(s){c.e(s)}finally{c.f()}};return null},st=function(){var e,t,n=Object(c.b)(),r=Object(c.c)((function(e){return e.subjects.value})),i=Object(c.c)((function(e){return e.groups.value})),o=Object(c.c)((function(e){return e.types.value})),u=Object(c.c)((function(e){return e.chosenEvent.value})),l=Object(et.f)().id,d=Object(s.useState)(0),j=Object(Ae.a)(d,2),b=j[0],p=j[1],f=Object(s.useState)(0),v=Object(Ae.a)(f,2),h=v[0],O=v[1],m=Object(s.useState)([]),x=Object(Ae.a)(m,2),y=x[0],g=x[1],_=Object(s.useState)(0),E=Object(Ae.a)(_,2),N=E[0],S=E[1],w=Object(s.useState)("12:00"),k=Object(Ae.a)(w,2),C=k[0],P=k[1],T=Object(s.useState)(0),D=Object(Ae.a)(T,2),I=D[0],z=D[1],G=Object(s.useState)(""),M=Object(Ae.a)(G,2),A=M[0],R=M[1],L=Object(s.useState)(""),U=Object(Ae.a)(L,2),F=U[0],H=U[1];Object(s.useEffect)((function(){J()}),[]);var J=function(){var e=Object($e.a)(Xe.a.mark((function e(){var t,n,a;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://kiedy-kolos-backend.azurewebsites.net/yearCourses/".concat(l,"/Events/").concat(u));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.next=8,n.result;case 8:a=e.sent,S(a.eventTypeId),p(a.subjectId),O(a.groupIds[0]),g([a.groupIds[0]]),R(a.description),console.log(Y()(a.date).format()),P(Y()(a.date).format("HH:mm")),z(Y()(a.date).format("YYYY-MM-DD"));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object($e.a)(Xe.a.mark((function e(){var t;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"DELETE",headers:{"Content-Type":"application/json","Api-Key":F},mode:"cors"},e.next=3,fetch("https://kiedy-kolos-backend.azurewebsites.net/yearCourses/".concat(l,"/Events/").concat(u),t);case 3:e.sent.ok&&(n(te(!1)),n(me()));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object($e.a)(Xe.a.mark((function e(){var t;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json","Api-Key":F},body:JSON.stringify({subjectID:b,yearCourseId:l,name:"temporary name",groupIds:y,date:I+"T"+C,description:A,eventTypeId:N,password:F}),mode:"cors"},e.next=3,fetch("https://kiedy-kolos-backend.azurewebsites.net/yearCourses/".concat(l,"/Events"),t);case 3:e.sent.ok&&(n(te(!1)),n(me()));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(tt,{children:[Object(a.jsxs)("h2",{children:["Edytowanie wydarzenia ",u]}),Object(a.jsx)("label",{htmlFor:"subject",children:"Przedmiot"}),Object(a.jsx)("select",{className:"event-adder__input",id:"subject",value:b,onChange:function(e){p(e.target.value)},children:r.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{className:"event-adder__label",htmlFor:"group",children:"Grupa"}),Object(a.jsx)("select",{className:"event-adder__input",id:"group",value:h,onChange:function(e){O(e.target.value),g([e.target.value])},children:i.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.groupNumber},e.id)}))}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{className:"event-adder__label",htmlFor:"type",children:"Typ"}),Object(a.jsx)("select",{className:"event-adder__input",id:"type",value:N,onChange:function(e){S(e.target.value)},children:o.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{className:"edition__label",htmlFor:"time",children:"Godzina"}),Object(a.jsx)("input",(e={type:"time",id:"time",name:"time",min:"07:00",value:"16:00:00",max:"21:00"},Object(Ze.a)(e,"value",C),Object(Ze.a)(e,"onChange",(function(e){P(e.target.value)})),e)),Object(a.jsx)("br",{}),Object(a.jsx)("label",{className:"edition__label",htmlFor:"date",children:"Godzina"}),Object(a.jsx)("input",(t={type:"date",id:"date",name:"date",min:"07:00",value:"16:00:00",max:"21:00"},Object(Ze.a)(t,"value",I),Object(Ze.a)(t,"onChange",(function(e){z(e.target.value)})),t)),Object(a.jsx)("br",{}),Object(a.jsx)("label",{className:"edition__label",htmlFor:"description",children:"Opis"}),Object(a.jsx)("textarea",{id:"description",name:"description",rows:"5",cols:"30",placeholder:"Tu wpisz opis...",value:A,onChange:function(e){R(e.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Has\u0142o",onChange:function(e){H(e.target.value)}}),Object(a.jsx)("button",{className:"event-adder__button--reject",onClick:function(e){e.preventDefault(),n(te(!1))},children:"Anuluj"}),Object(a.jsx)("button",{className:"event-adder__button--accept",onClick:function(e){e.preventDefault(),V(),B()},children:"Edytuj wydarzenie"})]})},it=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.groups.value})),n=Object(c.c)((function(e){return e.chosenGroupID.value})),r=Object(s.useState)(0),i=Object(Ae.a)(r,2),o=i[0],u=i[1];Object(s.useEffect)((function(){u(n)}),[n]);return Object(a.jsxs)(tt,{children:[Object(a.jsx)("h2",{children:"Ustawienia"}),Object(a.jsx)("label",{className:"event-adder__label",htmlFor:"group",children:"Grupa"}),Object(a.jsx)("select",{className:"event-adder__input",id:"group",value:o,onChange:function(e){u(e.target.value)},children:t.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.groupNumber},e.id)}))}),Object(a.jsx)("button",{onClick:function(){return e(ce(!1)),void e(B(o))},children:"Akceptuj"})]})},ot=function(){var e=Object(c.c)((function(e){return e.addEventPopup.value})),t=Object(c.c)((function(e){return e.removeEventPopup.value})),n=Object(c.c)((function(e){return e.editEventPopup.value})),r=Object(c.c)((function(e){return e.settingsPopup.value}));return Object(a.jsx)("div",{className:"panel",children:Object(a.jsxs)(et.c,{children:[Object(a.jsxs)(et.a,{exact:!0,path:"/:id",children:[Object(a.jsx)(rt,{}),Object(a.jsxs)(Pe,{children:[Object(a.jsx)(Ie,{}),Object(a.jsx)(Ge,{})]}),Object(a.jsx)(Fe,{}),Object(a.jsx)(Be,{}),e&&Object(a.jsx)(nt,{}),t&&Object(a.jsx)(at,{}),n&&Object(a.jsx)(st,{}),r&&Object(a.jsx)(it,{})]}),Object(a.jsxs)(et.a,{path:"/:id/admin",children:[Object(a.jsxs)(Pe,{children:[Object(a.jsx)(De,{children:"Panel Administratora"}),Object(a.jsx)(Ge,{})]}),Object(a.jsx)(qe,{})]})]})})},ut=function(){return Object(a.jsx)(ot,{})};u.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(c.a,{store:we,children:Object(a.jsx)(r.a,{basename:"/",children:Object(a.jsx)(Ce.PersistGate,{loading:null,persistor:ke,children:Object(a.jsx)(ut,{})})})})}),document.getElementById("root"))}},[[218,1,2]]]);
//# sourceMappingURL=main.4201556d.chunk.js.map